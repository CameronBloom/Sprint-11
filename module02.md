# Sprint 11 - Module 02
**Key Concepts**
- Authentication and Authorization
- Passing Token into Headers
- Blocking Routes

**Essential Questions**
- How do you pass an authorization header with axios?
- How do you create protected routes?
- How do you save a token from the backend to use for authorization?

**Objectives**
- Handle authentication with tokens in a React app.
- Implement protected routes using an authentication token and redirect.

**Review: JSON Web Tokens and Auth**
- The client app makes a request to the login endpoint on a web server, sending the username and password.
- If successful, the server responds with a token, which the client app saves locally in the browser (via localStorage, cookies, etc.).

**Review: Local Storage**
- Local storage provides a very straightforward way of saving key/value pairs locally in the browser.
- `localStorage.setItem('key', 'value');  // sets pair     `
- `localStorage.getItem('key');           // returns value `
- `localStorage.removeItem('key');        // removes pair  `
- `localStorage.clear();                  // removes all   `

**Review: Security Concerns**
- We use localStorage because it is convenient.
- Don't use localStorage to actually implement auth.
- Using local storage invites cross-scripting attacks.

**Review: API (HTTP and REST)**
- HTTP (axios) | CRUD (rest) | Description                         | Happy Path
- ===============================================================================================
- get          | read        | Read a representation of a resource | 200 (OK)
- post         | create      | Create new resources                | 201 (created)
- put          | update      | Update a resource                   | 200 (OK) or 201 (created)
- delete       | delete      | Delete a resource                   | 200 (OK) or 204 (no content)
- 
- Errors
- ===============================================================================================
- Error: 400 Bad Request - Sent invalid JSON or the syntax/context is incorrect
- Error: 401 Unauthorized - Access credentials were missing or invalid
- Error: 403 Forbidden - Access credentials are valid but not authorized to access the resource
- Error: 404 Not Found - Request is valid, but the resource does not exist or is outside scope

## Module Notes
- *Mocks helps us simulate the behavior of real objects.*
- *Spies help us verify that the things we expect to be called are actually called.*
- *Naming convention for test files is `Component.test.js`*

## Module Examples
*create axios configuration for with `Authorization: <token>` header attached to requests*
` import axios from 'axios';                       `
`  export const axiosWithAuth =() => {             `
`     const token = localStorage.getItem('token'); `
`                                                  `
`     return axios.create({                        `
`         headers: {                               `
`             Authorization: token,                `
`         },                                       `
`     });                                          `
` };                                               `

### Objective 1 - Handle Authentication With Tokens in a React App
- In general, servers don't remember anything about us after each interaction. 
- Clients need to tack a reminder to every request. This is commonly done automatically with cookies. 
- Cookies are just small pieces of data generated by the browser to store state information.
- Modern web services dealing with JSON data often use JSON Web Tokens (JWT) instead.
- These tokens, issued by the server, can be stored on the client-side using local or session storage.
- The server can readily tell the client that it issued the token.
- It can also read the token and make decisions for data transfer based on the client's permission.
- A common pattern is for a login endpoint to exist, which takes a payload of `username` and `password`.
- If the credentials are known, the server responds with a fresh JWT.
- It's the application's responsibility to add an `Authorization: <token>` header to every request.

### Objective 2 - Implement Protected Routes Using an Authentication Token and Redirect
- "Protected" routes should only render with authentication as we build our web apps.
- With a token, we can add two layers of protection to our app. 
- - One uses protected routes
- - One sends an authentication header with our API calls (as we learned in the above objective).